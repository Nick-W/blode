<!DOCTYPE html> 
<html>
  <head>
    <title>Blode - hits are pretties</title>
      <link rel="stylesheet" type="text/css" media="screen" href="css/map.css" /> 
      <script src="js/prototype.js" type="text/javascript"></script>
      <script src="js/jsonp.js" type="text/javascript"></script>
      <script src="js/heatmap.js" type="text/javascript"></script>
      <script src="js/blode_helpers.js" type="text/javascript"></script>
      <script src="js/blode_message.js" type="text/javascript"></script>
      <script src="js/blode_socket.js" type="text/javascript"></script>
      <script src="js/blode_map.js" type="text/javascript"></script>
      <script language="javascript">
        window.onload = function() {
          $('visualization').setStyle({ height: $('visualization').getWidth() / 2 + "px"});
          window.blode_map = new BlodeMap('visualization');

          $('size_up').onclick = function() {
            if(window.blode_map._point_size < 50)
              window.blode_map._point_size++;
          }

          $('size_down').onclick = function() {
            if(window.blode_map._point_size > 1)
              window.blode_map._point_size--;
          }

          $('hits').onclick = function() {
            window.blode_map.hits_enabled = (window.blode_map.hits_enabled) ? false : true;
          }

          $('party_mode').onclick = function() {
            window.blode_map.party_mode = (window.blode_map.party_mode) ? false : true;
          }

          $('crosshair').onclick = function() {
            window.blode_map.crosshair_enabled = (window.blode_map.crosshair_enabled) ? false : true;
          }

          $('orders').onclick = function() {
            window.blode_map.orders_enabled = (window.blode_map.orders_enabled) ? false : true;
          }

          $('shipments').onclick = function() {
            window.blode_map.shipments_enabled = (window.blode_map.shipments_enabled) ? false : true;
          }

          $('heatmap').onclick = function() {
            if(window.blode_map.heatmap_enabled) {
              window.blode_map.heatmap_enabled = false;
              window.blode_map._heatmap.store.setDataSet({ max: 1, data: [] });
            } else {
              window.blode_map.heatmap_enabled = true;
            }
          }
        };
      </script>
  </head>
  <body>
    <h1>real-time visitors</h1>
    <p id="visualization">
    </p>
    <p id="controls">
      <div class="point_size">
        point size: [ <span id="size_up">+</span> / <span id="size_down">-</span> ]
      </div>
      <div class="hits">
        hits: [ <input id="hits" type="checkbox" checked /> ]
      </div>
      <div class="crosshair">
        crosshair: [ <input id="crosshair" type="checkbox" /> ]
      </div>
      <div class="party">
        party mode: [ <input id="party_mode" type="checkbox" /> ]
      </div>
      <div class="heatmap">
        heatmap: [ <input id="heatmap" type="checkbox" /> ]
      </div>
      <div class="orders">
        orders: [ <input id="orders" type="checkbox" /> ]
      </div>
      <div class="shipments">
        shipments: [ <input id="shipments" type="checkbox" /> ]
      </div>
    </p>
  </body>
</html>
